/*
Polinomial.js v1.1.0 03/07/2015

Copyright (c) 2015, Robert Eisele (robert@xarg.org)
Dual licensed under the MIT or GPL Version 2 licenses.
*/
(function(t){"use strict";function v(a){return function(){var b=this.coeff,d=[],c;for(c in b)d.push(+c);if(0===d.length)return"0";d.sort(function(a,d){return a-d});for(var f,g="",e=d.length;e--;){c=d[e];var m=b[c];f=m;if(null!==f&&void 0!==f)if(k&&f instanceof k){if(0!==f.re){""!==g&&0<f.re&&(g+="+");if(-1===f.re&&0!==c)g+="-";else if(1!==f.re||0===c)g+=f.re;1===c?g+="x":0!==c&&(g+="x^"+c)}0!==f.im&&(""!==g&&0<f.im&&(g+="+"),-1===f.im?g+="-":1!==f.im&&(g+=f.im),g+="i",1===c?g+="x":0!==c&&(g+="x^"+c))}else if(f=
f.valueOf(),0!==f){""!==g&&0<f&&(g+="+");if(-1===f&&0!==c)g+="-";else if(1!==f||0===c)g+=m[a]?m[a]():m.toString();1===c?g+="x":0!==c&&(g+="x^"+c)}}return""===g?m[a]?m[a]():m.toString():g}}function n(a){var b={};if(null===a||void 0===a)a=0;switch(typeof a){case "object":a.coeff&&(a=a.coeff);if(l&&a instanceof l||k&&a instanceof k)b[0]=a;else for(var d in a)h.empty(a[d])||(b[d]=a[d]);return b;case "number":return{0:h.parse(a)};case "string":for(var c,f;null!==(d=A.exec(a));){f=c=1;void 0!==d[4]?(c=
d[4],f=0):void 0!==d[2]&&(c=d[2]);var g=d[1];c=String(c).match(/[^*/]+|[*/]/g);for(var g=h.parse(g+c[0]),e=1;e<c.length;e+=2)"*"===c[e]?g=h.mul(g,h.parse(c[e+1]||1)):"/"===c[e]&&(g=h.div(g,h.parse(c[e+1]||1)));c=g;void 0!==d[3]&&(f=parseInt(d[3],10));b[f]=void 0===b[f]?c:h.add(b[f],c)}return b}throw"Invalid Param";}function u(a,b){for(var d={},c=p(a),f=p(b),g=[];c>=f;){var w=d[c-f]=h.div(a[c]||0,b[f]||0),m;for(m in b)a[+m+c-f]=h.sub(a[+m+c-f]||0,h.mul(b[m]||0,w));if(null!==e.trace){var k={};for(m in b)k[+m+
c-f]=h.mul(b[m]||0,w);g.push(new e(k))}c=p(a)}null!==e.trace&&(g.push(new e(a)),e.trace=g);return d}function x(a,b){var d=1;for(b=a-b;b<a;a--)d*=a;return d}function e(a){if(!(this instanceof e))return new e(a);this.coeff=n(a)}function q(a){var b={},d;for(d in a)b[d]=a[d];return b}function y(a,b){var d={},c;for(c in a)d[c]=1;for(c in b)d[c]=1;return d}function p(a){var b=Number.NEGATIVE_INFINITY,d;for(d in a)h.empty(a[d])||(b=Math.max(d,b));return b}function r(a){var b=null,d;for(d in a)!h.empty(a[d])&&
(null===b||+b<+d)&&(b=d);return b}function z(a,b){if(null!==b)for(var d in a)a[d]=h.div(a[d],a[b]);return a}var h={add:function(a,b){return a+b},sub:function(a,b){return a-b},mul:function(a,b){return a*b},div:function(a,b){if(0===b)throw"DIV/0";return a/b},parse:function(a){return parseFloat(a)},empty:function(a){return!a},pow:function(a,b){return Math.pow(a,b)}},B=h,l,k,A=/([+-]?)(?:([^+x-]+)?(?:x(?:\^([\d\/]+))?)|([^+x-]+))/g;e.trace=null;e.prototype.coeff={};e.prototype.gcd=function(a){var b=q(this.coeff);
for(a=n(a);p(a)!==Number.NEGATIVE_INFINITY;){var d=q(b);u(d,a);b=a;a=d}a=r(b);return new e(z(b,a))};e.prototype.neg=function(){var a={},b=this.coeff,d;for(d in b)a[d]=h.mul(b[d],-1);return new e(a)};e.prototype.lc=function(){var a=r(this.coeff);return this.coeff[a]};e.prototype.lm=function(){var a=r(this.coeff),b={};b[a]=this.coeff[a];return new e(b)};e.prototype.monic=function(){return new e(z(q(this.coeff),r(this.coeff)))};e.prototype.add=function(a){a=n(a);var b={},d=this.coeff,c=y(a,d),f;for(f in c)b[f]=
h.add(d[f]||0,a[f]||0);return new e(b)};e.prototype.sub=function(a){a=n(a);var b={},d=this.coeff,c=y(a,d),f;for(f in c)b[f]=h.sub(d[f]||0,a[f]||0);return new e(b)};e.prototype.mul=function(a){a=n(a);var b={},d=this.coeff,c;for(c in a){c=+c;for(var f in d)f=+f,b[c+f]=h.add(b[c+f]||0,h.mul(a[c]||0,d[f]||0))}return new e(b)};e.prototype.addmul=function(a,b){var d=n(a),c=n(b),f={},g;for(g in d){g=+g;for(var e in c)e=+e,f[g+e]=h.add(f[g+e]||0,h.mul(d[g]||0,c[e]||0))}return this.add(f)};e.prototype.div=
function(a){return new e(u(q(this.coeff),n(a)))};e.prototype.pow=function(a){if(isNaN(a)||0>a||a%1)throw"Invalid";for(var b=new e(1),d=this;0<a;)a&1&&(b=b.mul(d)),d=d.mul(d),a>>=1;return b};e.prototype.mod=function(a){var b=q(this.coeff);u(b,n(a));return new e(b)};e.prototype.derive=function(a){if(void 0===a)a=1;else if(0>a)return null;var b=this.coeff,d={},c;for(c in b)+c>=a&&(d[c-a]=h.mul(b[c]||0,x(+c,a)));return new e(d)};e.prototype.integrate=function(a){if(void 0===a)a=1;else if(0>a)return null;
var b=this.coeff,d={},c;for(c in b)d[+c+a]=h.div(b[c]||0,x(+c+a,a));return new e(d)};e.prototype.result=function(a){var b=this.coeff,d=0,c;for(c in b)d=h.add(d,h.mul(b[c],h.pow(a,c)));return d};e.prototype.toString=v("toString");e.prototype.toLatex=v("toLatex");e.prototype.toHorner=function(){function a(a,d){var b="";k&&a instanceof k?0===a.im?(0<a.re&&d&&(b+="+"),b+=a.re):0===a.re?(-1===a[f]?b+="-":1!==a.im&&(0<a.im&&d&&(b+="+"),b+=a.im),b+="i"):(d&&(b+="+"),b=b+"("+a.toString(),b+=")"):(0<a&&d&&
(b+="+"),b+=a.toString());return b}function b(c,f){var e=c.length-f-1,h=c[e]-(c[e-1]||0),k="",l="";0<h&&(k="x",1<h&&(k+="^"+h));0<e&&(k+=a(d[c[e-1]],!0));if(0===f)return a(d[c[e]],!1)+k;0<=e&&c[e]&&(l+="(");l+=b(c,f-1);0<=e&&c[e]&&(l+=")");return l+k}var d=this.coeff,c=[],f;for(f in d)h.empty(d[f])||c.push(+f);if(0===c.length)return"0";c.sort(function(a,b){return a-b});return b(c,c.length-1)};e.prototype.clone=function(){return new e(this)};e.prototype.degree=function(){return p(this.coeff)};e.setField=
function(a){if("Q"===a)h={add:function(a,b){return(new l(a)).add(b)},sub:function(a,b){return(new l(a)).sub(b)},mul:function(a,b){return(new l(a)).mul(b)},div:function(a,b){return(new l(a)).div(b)},parse:function(a){return new l(a)},empty:function(a){return(new l(a)).equals(0)},pow:function(a,b){return(new l(a)).pow(b)}};else if("C"===a)h={add:function(a,b){return(new k(a)).add(b)},sub:function(a,b){return(new k(a)).sub(b)},mul:function(a,b){return(new k(a)).mul(b)},div:function(a,b){return(new k(a)).div(b)},
parse:function(a){return new k(a)},empty:function(a){return(new k(a)).equals(0)},pow:function(a,b){return(new k(a)).pow(b)}};else if(!a||"R"===a)h=B;else if("object"===typeof a)h=a;else if("Z"===a.charAt(0)){var b=+a.slice(1);h={add:function(a,c){return((a+c)%b+b)%b},sub:function(a,c){return((a-c)%b+b)%b},mul:function(a,c){return(a*c%b+b)%b},div:function(a,c){var f;f=c;for(var e=b,h=0,k=1,l=1,n=0;0!==f;){var p=e/f|0,q=e%f,r=h-l*p,p=k-n*p,e=f;f=q;h=l;k=n;l=r;n=p}f=[e,h,k];if(1!==f[0])throw"DIV/-";
return(a*f[1]%b+b)%b},parse:function(a){return parseInt(a,10)},empty:function(a){return void 0===a||0===a},pow:function(a,c){for(var e=1;0<c;a=(a*a%b+b)%b,c>>=1)c&1&&(e=(e*a%b+b)%b);return e}}}};"function"===typeof define&&define.amd?define(["fraction.js","complex.js"],function(a,b){l=a;k=b;return e}):"object"===typeof exports?(l=require("fraction.js"),k=require("complex.js"),module.exports=e):(l=t.Fraction,k=t.Complex,t.Polynomial=e)})(this);
